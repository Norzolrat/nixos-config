# keybinds.conf — cleaned & updated for noctalia-shell (NixOS binary)
# Notes
# - Replaced all Quickshell calls with noctalia-shell IPC commands
# - On NixOS the binary is `noctalia-shell` (no `qs -c` wrapper)
# - Removed conflicting duplicates (workspaces, lock/suspend, sidebars)
# - Kept useful fallbacks (brightnessctl/wpctl, grim) when shell IPC is unavailable
# - Preserved your non-shell utilities (screenshots, recorder, OCR, color picker, apps)

#!
##! Shell (noctalia)
# Start shell (manual):
bind = Super+Shift, A, exec, noctalia-shell # Start the shell on-demand

# Launcher / Panels / Toggles
bind = Super, Space, exec, noctalia-shell ipc call launcher toggle # App launcher
bind = Super, A, exec, noctalia-shell ipc call sidePanel toggle # Side panel
bind = Super, V, exec, noctalia-shell ipc call launcher clipboard || cliphist list | fuzzel --match-mode fzf --dmenu | cliphist decode | wl-copy # Clipboard history
bind = Super, Period, exec, noctalia-shell ipc call launcher calculator || ~/.config/hypr/hyprland/scripts/fuzzel-emoji.sh copy # Calculator (fallback: emoji picker)
bind = Ctrl+Alt, Delete, exec, noctalia-shell ipc call powerPanel toggle || wlogout -p layer-shell # Power/session panel
bind = Super, I, exec, noctalia-shell ipc call settings toggle # Settings window
bind = Super, L, exec, noctalia-shell ipc call lockScreen toggle || loginctl lock-session # Lock screen
bind = Super, Slash, exec, noctalia-shell ipc call notifications toggleHistory # Notification history
bind = Super+Shift, Slash, exec, noctalia-shell ipc call notifications toggleDND # Notification DND
bind = Super+Alt, D, exec, noctalia-shell ipc call darkMode toggle # Toggle dark mode
bind = Ctrl+Super, T, exec, noctalia-shell ipc call wallpaper random || ~/.config/noctalia-shell/scripts/colors/switchwall.sh # Random wallpaper
bind = Super+Shift, E, exec, noctalia-shell ipc call powerPanel toggle

# Brightness / Volume
bind = , XF86MonBrightnessUp, exec, noctalia-shell ipc call brightness increase || brightnessctl s 5%+
bind = , XF86MonBrightnessDown, exec, noctalia-shell ipc call brightness decrease || brightnessctl s 5%-
bind = , XF86AudioRaiseVolume, exec, noctalia-shell ipc call volume increase || wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 2%+
bind = , XF86AudioLowerVolume, exec, noctalia-shell ipc call volume decrease || wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%-
bind = , XF86AudioMute, exec, noctalia-shell ipc call volume muteOutput || wpctl set-mute @DEFAULT_SINK@ toggle # Toggle mute (output)
bind = , XF86AudioMicMute, exec, noctalia-shell ipc call volume muteInput || wpctl set-mute @DEFAULT_SOURCE@ toggle # Toggle mute (input)

#!
##! Utilities
# Screenshots
bind = Super+Shift, S, exec, grim -g "$(slurp $SLURP_ARGS)" - | wl-copy # Region → clipboard
bind = , Print, exec, grim - | wl-copy # Fullscreen → clipboard
bind = Ctrl, Print, exec, mkdir -p $(xdg-user-dir PICTURES)/Screenshots && grim $(xdg-user-dir PICTURES)/Screenshots/Screenshot_"$(date '+%Y-%m-%d_%H.%M.%S')".png # Fullscreen → file

# OCR (region → text → clipboard)
bind = Super+Shift, T, exec, grim -g "$(slurp $SLURP_ARGS)" /tmp/ocr.png && tesseract /tmp/ocr.png - | wl-copy && rm /tmp/ocr.png

# Color picker
bind = Super+Shift, C, exec, hyprpicker -a

# Recording
bind = Super+Alt, R, exec, ~/.config/hypr/hyprland/scripts/record.sh # Region (no sound)
bind = Super+Shift+Alt, R, exec, ~/.config/hypr/hyprland/scripts/record.sh --fullscreen-sound # Screen (with sound)

#!
##! Window
# Move/resize
bindm = Super, mouse:272, movewindow
bindm = Super, mouse:273, resizewindow

# Close / force kill
bind = Alt, F4, killactive
bind = Super, Q, killactive
bind = Super+Shift+Alt, Q, exec, hyprctl kill

# Floating / fullscreen / pin
bind = Super+Alt, Space, togglefloating
bind = Super, F, fullscreen, 1
bind = Super+Alt, F, fullscreen, 0
bind = Super, P, pin

# Focus & move (arrows)
bind = Super, Left, movefocus, l
bind = Super, Right, movefocus, r
bind = Super, Up, movefocus, u
bind = Super, Down, movefocus, d
bind = Super+Shift, Left, movewindow, l
bind = Super+Shift, Right, movewindow, r
bind = Super+Shift, Up, movewindow, u
bind = Super+Shift, Down, movewindow, d

# Split ratio
binde = Super, Semicolon, splitratio, -0.1
binde = Super, Apostrophe, splitratio, +0.1

#!
##! Workspaces (clean — Hyprland native only)
# Switch
bind = Super, code:10, workspace, 1
bind = Super, code:11, workspace, 2
bind = Super, code:12, workspace, 3
bind = Super, code:13, workspace, 4
bind = Super, code:14, workspace, 5
bind = Super, code:15, workspace, 6
bind = Super, code:16, workspace, 7
bind = Super, code:17, workspace, 8
bind = Super, code:18, workspace, 9
bind = Super, code:19, workspace, 10

bind = Super, LEFT, workspace, e-1
bind = Super, RIGHT, workspace, e+1

# Move window to workspace
bind = Super+Shift, code:10, movetoworkspace, 1
bind = Super+Shift, code:11, movetoworkspace, 2
bind = Super+Shift, code:12, movetoworkspace, 3
bind = Super+Shift, code:13, movetoworkspace, 4
bind = Super+Shift, code:14, movetoworkspace, 5
bind = Super+Shift, code:15, movetoworkspace, 6
bind = Super+Shift, code:16, movetoworkspace, 7
bind = Super+Shift, code:17, movetoworkspace, 8
bind = Super+Shift, code:18, movetoworkspace, 9
bind = Super+Shift, code:19, movetoworkspace, 10

# Scratchpad
bind = Super, S, togglespecialworkspace
bind = Super+Alt, S, movetoworkspacesilent, special

# Alt-Tab behavior
bind = Alt, Tab, cyclenext
bind = Alt, Tab, bringactivetotop

#!
##! Session / Power
bind = Super+Shift, L, exec, systemctl suspend || loginctl suspend # Suspend (fixed: no duplicate)
bind = Ctrl+Shift+Alt+Super, Delete, exec, systemctl poweroff || loginctl poweroff # Power off

#!
##! Screen zoom (fallback scripts if shell zoom not provided)
binde = Super, Minus, exec, ~/.config/hypr/hyprland/scripts/zoom.sh decrease 0.1
binde = Super, Equal, exec, ~/.config/hypr/hyprland/scripts/zoom.sh increase 0.1

#!
##! Apps
bind = Super, D, exec, noctalia-shell ipc call launcher toggle
bind = Super, Return, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "foot" "alacritty" "kitty -1" "wezterm" "konsole" "kgx" "uxterm" "xterm"
bind = Super, E, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "dolphin" "nautilus" "nemo" "thunar" "kitty -1 fish -c yazi"
bind = Super, W, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "google-chrome-stable" "zen-browser" "firefox" "brave" "chromium" "microsoft-edge-stable" "opera" "librewolf"
bind = Super, C, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "code" "codium" "cursor" "zed" "zeditor" "kate" "gnome-text-editor" "emacs" "command -v nvim && kitty -1 nvim"
bind = Super+Shift, W, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "wps" "onlyoffice-desktopeditors"
bind = Super, X, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "kate" "gnome-text-editor" "emacs"
bind = Ctrl+Super, V, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "pavucontrol-qt" "pavucontrol"
bind = Ctrl+Shift, Escape, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "missioncenter" "gnome-system-monitor" "plasma-systemmonitor --page-name Processes" "command -v btop && kitty -1 fish -c btop"

#!
##! Helper — restart shell widgets (optional)
bind = Ctrl+Super, R, exec, pkill noctalia-shell || true; sleep 0.2; noctalia-shell & disown
